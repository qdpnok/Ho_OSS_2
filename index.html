<!DOCTYPE html>
<html>
    <head>
        <title>Ho_OSS_2_js</title>
        <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
            <script>
                $(document).ready(function(){
                    var default_URL = "http://34.64.99.230/"; //gcp 서버 닫았다가 열면 재설정해주기
                    var languages;
                    var lan_num;

                    $.ajax({
                        method: "GET",
                        url: default_URL + "version",
                            success: function (version) {
                                $("h2").text(version);
                    }
                    });

                    $.ajax({
                        method: "GET",
                        url: default_URL + "languages/",
                        async:false, //동기 방식으로 지정해서 전역변수에 데이터 값 저장.
                            success: function (result) {
                                var i = 0;
                                languages = result;
                                while(languages.length != i-1) {
                                    $("#list").append("<option>" + languages[i].name + "</option>");
                                    i++;
                                }
                            }
                    });

                    //셀렉터 값 선택하면 lan_num에 선택한 언어의 id가 들어감.
                    $("#list").change(function() {
                        var list_index = $("#list option").index($("#list option:selected"));
                        lan_num = languages[list_index].id;
                    });

                    //클릭하면 ajax로 값을 전달하고 바로 받고싶음. 
                    $("#button").click(function() {
                        $("body").append("<h3>" + ("#box").val() + "/<h3>");
                        /*$.ajax({
                            method: "POST",
                            url: default_URL + "submissions/",
                            data: {source_code: $("#box").text(), language_id: lan_num},
                            success: function (token) {
                                $.ajax({
                                    method: "GET",
                                    url: default_URL + "submissions/" + token,
                                    async: false,
                                    success: function (result) {
                                        $("body").append("<h3>" + result + "</option>");
                                    }
                                });
                            }
                        });*/
                    });
                });

            </script>
        </head>
        <style>
            .header {
                display: flex;}
            #box {
                width: 400px; height: 400px;
            }
            #button {
                margin-left: 10px;
                margin-right: 10px;
                background-color: plum;
            }
            #version {
                margin-left: 10px;
                margin-right: 10px;
            }
            #name {
                border:1px solid black;
                background-color: darkgrey;
            }
        </style>
    <body>
        
        <div class="header">
            <h1 id="name">Judge0 IDE</h1>
            <h2 id="version"></h2>
            <input type="button" value="RUN(F9)" id="button">
            <select id="list"></select>
        </div>
            <input id="box" type="text">
        
    </body>
</html>
